---
title: Testing MCP Servers
sidebarTitle: Testing
description: Learn how to test your FastMCP servers effectively 
icon: vial
---


Testing your MCP servers thoroughly is essential for ensuring they work correctly when deployed. FastMCP makes this easy through a variety of testing patterns.

## In-Memory Testing

The most efficient way to test an MCP server is to pass your FastMCP server instance directly to a Client. This enables in-memory testing without having to start a separate server process, which is particularly useful because managing an MCP server programmatically can be challenging.

Here is an example of using a `Client` to test a server with pytest:

```python
import pytest
from fastmcp import FastMCP, Client

@pytest.fixture
def mcp_server():
    server = FastMCP("TestServer")
    
    @server.tool
    def greet(name: str) -> str:
        return f"Hello, {name}!"
        
    return server

async def test_tool_functionality(mcp_server):
    # Pass the server directly to the Client constructor
    async with Client(mcp_server) as client:
        result = await client.call_tool("greet", {"name": "World"})
        assert result.data == "Hello, World!"
```

This pattern creates a direct connection between the client and server, allowing you to test your server's functionality efficiently.

You can also test your MCP servers with Bearer Token Authentication with this approach, by using the [Generating Tokens](https://gofastmcp.com/servers/auth/bearer#generating-tokens) functionality.

```python
import pytest

from tools import mytool

from fastmcp import FastMCP, Client
from fastmcp.server.auth import BearerAuthProvider
from fastmcp.server.auth.providers.bearer import RSAKeyPair

@pytest.fixture(scope="module")
def rsa_key_pair() -> RSAKeyPair:
    return RSAKeyPair.generate()


@pytest.fixture
def bearer_provider(rsa_key_pair: RSAKeyPair) -> BearerAuthProvider:
    return BearerAuthProvider(
        public_key=rsa_key_pair.public_key,
        issuer="https://test.example.com",
        audience="https://api.example.com",
    )

@pytest.fixture
def mcp_server(bearer_provider):
    server = FastMCP("TestServer", auth=bearer_provider)
    server.tool()(mytool.to_test)
    return server

async def test_my_tool_jwt_claims(mcp_server, rsa_key_pair):
    async with Client(
        mcp_server,
        auth=rsa_key_pair.create_token(
            subject="john.doe@example.com",
            issuer="https://test.example.com",
            audience="https://api.example.com",
            additional_claims={
                /* Add as many claims to be tested for your business logic as you want
            }
        )
    ) as client:
        ...
```

<Tip>
If you're using pytest for async tests, as shown above, you may need to configure appropriate markers or set `asyncio_mode = "auto"` in your pytest configuration in order to handle async test functions automatically.
</Tip> 


## Mocking

FastMCP servers are designed to work seamlessly with standard Python testing tools and patterns. There's nothing special about testing FastMCP servers - you can use all the familiar Python mocking, patching, and testing techniques you already know.

